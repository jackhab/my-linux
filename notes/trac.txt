sudo apt-get update -y
sudo apt-get upgrade -y
sudo apt-get install git trac libapache2-mod-wsgi apache2 -y
sudo systemctl start apache2
sudo systemctl enable apache2
sudo a2enmod auth_digest

sudo mkdir /var/lib/trac
sudo mkdir -p /var/www/html/trac
sudo chown www-data:www-data /var/www/html/trac
sudo trac-admin /var/lib/trac/test initenv test sqlite:db/trac.db
sudo trac-admin /var/lib/trac/test deploy /var/www/html/trac/test
sudo chown -R www-data:www-data /var/lib/trac/test
sudo chown -R www-data:www-data /var/www/html/trac/test
sudo htdigest -c /var/lib/trac/test/.htdigest "test" admin

echo '
WSGIScriptAlias /trac/test /var/www/html/trac/test/cgi-bin/trac.wsgi
<Location /trac/test>
  AuthType Digest
  AuthName "test"
  AuthUserFile /var/lib/trac/test/.htdigest
  Require valid-user
</Location>
' > /etc/apache2/sites-available/trac.conf

sudo a2ensite trac.conf
sudo systemctl restart apache2

wget https://download.edgewall.org/trac/Trac-1.2.3.tar.gz
sudo ./setup.py install
